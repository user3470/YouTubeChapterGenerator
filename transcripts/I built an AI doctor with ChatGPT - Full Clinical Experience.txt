you know how whenever you go to the doctor and they ask you a million and a half questions and then the doctor asks you the same questions over again well I wanted to automate that but also I was inspired by this article that came out uh just uh last week or in the last couple weeks basically the story is chat GPT correctly diagnosed a four-year-old's pain after 17 doctors failed it took three years and it was uh it was basically something wrong with his spinal cord and that the you know the the parent having access to chat GPT was able to talk through it and figure out what exactly to share with with the doctors and what to ask for and was able to get a proper diagnosis and now because of AI they were able to diagnose this tethered cord syndrome and treat the little boy which is great but you know rather than allowing or or basically requiring someone to fudge through it on their own I wanted to apply my considerable technical skills at automate in this pipeline so let me show you real quick oops you don't need to see that there we go let me show you real quick what um what I did so this is what it looks like and this is this is uh I'll we'll unpack all the code in just a moment but I wanted to show you kind of end to end what I did so first let me zoom in so that you can see this first it's a simple chat bot that that acts like that intake interview and before we jump in I need to say that uh very definitively this is not a medical device this is not approved by the F FDA this is not approved by any medical regulator it is also provided under the MIT license which means use this at your own risk it is provided as is this is provided for scientific curiosity only do not use this as a medical device do not use this for diagnosis it is not ready I will unpack all the reasons why it is not ready by the end of the video but it is useful and it is helpful and I want to basically really just proves that the technology is ready for the next step in clinical usage with the proper testing so on and so forth okay so with that out of the way um it's a it starts off as a simple chat bot that it has this very simple mission of asking a clinical questions the same way that an intake nurse will ask you kind of these interview questions to figure out what's going on the next thing that it does is it is it compresses everything that you give it into just a few notes and so again this is the point so it takes that whole conversation compresses it to the most uh Salient notes and then from those notes it will generate a couple of hypotheses and so this this clinical report is the is what it what it believes are the most likely uh possible things to investigate so these are diagnostic hypotheses which again this is how uh not necessarily how all clinicians work and also some clinicians out there might be saying well you're kind of jumping ahead because you shouldn't be coming up with a hypothesis yet there's also a few problems with this so let's start unpacking why this really simple approach is I'm already aware that it's flawed so this is basically just kind of bringing up the things that are that it that things are most likely we don't know how chat GPT was trained to handle things like symptoms it's entirely possible that it will miss rarer conditions and I've actually thought about creating a version of this that is for like you know hey we've already gone through like a lot of Specialists we're trying to find rare conditions now if chat GPT was able to was able to help find the cause of that little boys pain with tethered cord syndrome I think it probably has the capacity to systematically and formally discover rare conditions but this is more of a primary care practice a PCP kind of approach because again one of the things that particularly in America that's a problem is Medical Care is incredibly expensive and if you can reduce most doctor's office visits to like five minutes with a nurse and then they interact with a machine then the cost could go from hundreds of dollars to literally like five to ten dollars per visit and this could be something that could really drastically help underserved populations um okay so in this case the I was pretending to be um an older gentleman who is having freezing episodes um if you're familiar with the news there is a particular older gentleman who has had some rather public freezing episodes and so I basically pretended to be him um or someone someone who's presenting similar things of freezing for 20 seconds every now and then um so the the chat intake takes all that and then uh compresses it down to notes then it generates this clinical report this this uh this hype uh set of diagnostic hypotheses it says okay this is what I think it is you know in this case it could be a transient ischemic attack also known as a mini stroke blah blah blah so it just spells it out in plain English uh neurological dysfunction caused by temporary loss of blood flow differentials so for those of you that are not familiar with the clinical term differentials is basically like what are some similar but different things that could cause is the same thing and um in working with chat GPT and the API to like figure out exactly how to approach this I realize that one thing that clinicians always do is they're keeping in mind okay here's my primary hypothesis but here's also a list of differentials that I need to keep track of um and just by writing it down these are all other avenues to investigate demographics more common in older adults particularly those over 60 and that's probative here because the patient is 80 or in his 80s symptoms sudden weakness or numbness on one side of the body confusion uh blah blah so on and so forth indicators patient AIDS episode of free uh sorry patients Age episodes of freezing loss of consciousness confusion or difficulty in finding the right words after episodes Contra indicators no reported weakness numbness severe headache or dizziness so from a clinical perspective something like indicators is this is this is stuff that says yes this is positive this is positively correlated with what we're thinking about and then contraindications or Contra indicators are things that basically say well it's not hitting on all cylinders it doesn't match up perfectly so again like differentials you want to be mindful of what matches and what doesn't match uh prognosis tias are often warning signs of future Strokes with proper management the risk can be significantly reduced so this is all information that can be like either given to the patient or given to um you know an intake nurse or someone who might have less specific experience but again it's also important to remember that these are not diagnosis yet these are hypotheses for investigation and then finally it uh recommends some some potential treatments and tests to go with it uh and then the second option is epilepsy so I actually watched um a uh like neuros neuro physician uh whatever uh neurologist that's the word a neurologist uh breakdown actually several breakdowns of some of these events and they basically said the same thing the two primary uh things that they suspect are transient ischemic attacks which is a mini stroke or epilepsy um or a particular kind of epilepsy so in this case the uh based on outside information uh this chat GPT API directly agrees with uh with what some professionals have mentioned granted again any responsible clinician will tell you you cannot diagnose someone just from watching a couple videos of them freezing up in public but given the same information that I have and giving that information to this tool that I've built it came up with roughly the same basically clinical uh I'm not going to say conclusion but Avenues of investigation and so then the next phase is now that it now that it has done the intake it has summarized the intake it has come up with a few hypotheses um it is now uh recommending clinical evaluation and I actually messed up on the output so we need to switch over to the logs and I have it save it all um to log files right now um now if you want to use this or test it out obviously don't put your own personal clinical information uh up on GitHub don't put it up publicly don't share it with anyone other than your medical provider because of uh patient confidentiality laws which are pretty Universal they're actually stricter in Europe I believe than in America so anyways here is here's a breakdown of what we save so here's the chat log um here's the notes Here is the uh the the diagnostic hypotheses and then finally here's the clinical uh pain so this is a clinical report or clinical evaluation report that is meant to be then given to the physician or or the clinician whether it's a nurse practitioner or registered nurse or physician's assistant and so the first thing that it does is recommend all the um all of these Sensations to engage with uh with the patient in order to basically dial in like what is it that you're looking for and the reason that I included this is because if you talk to particularly ER Physicians um but really any experienced physician they can often get a tremendous amount of information just by walking into a room and glancing at the patient there will be specific um like pallers that the patient might have or like Expressions there could also be particular smells associated with very various conditions so for instance if someone is in ketosis they're going to have a very distinctive smell which chat GPT doesn't have a sense of smell yet so but but it can tell the clinician like hey if you smell this thing this is a sign of ketosis and pay attention to that because that can be very probative whereas inexperienced clinicians might not recognize they might notice a smell but they might not know what it means and so this section is basically saying like hey look for this kind of thing the second section of the clinical report is examination so this is like what you're physically supposed to do you know how like the doctors always come in and they poke and they prod you and they like check your reflexes that sort of thing um this first version it recommended other examinations that are not part of the primary care practice um so I modified it so if you run this again it'll give you slightly different output and then finally um it also has some recommended interview questions so this is basically uh priming the doctor or the clinician to say hey um here are some follow-up questions that you might want to use in order to interview this patient to get better more information and again this is why Physicians always ask some of the same questions again it's not that they don't necessarily trust their uh their their intake staff it's just they want to see your reaction for themselves and they also might you know based on their clinical experience dial into something that the intake clinicians missed um so yeah in this case I have it set so that it'll tell you like what it's looking for so episode triggers in the case of the freezing have you noticed any patterns or triggers post episode symptoms medical history and concussion follow-up like have you done anything for the concussion that preceded all this um so this is the clinical evaluation and then finally you know how doctors they'll send you away with a list of tests and referrals and stuff so I have it do the same thing so the referral here from primary care says uh go to a neurologist I'm actually kind of surprised that it didn't recommend a cardiologist however it did recommend a carotid ultrasound so basically saying like hey let's check for any blockages of the blood flow to the brain so let's do an EEG this will test to identify abnormal electrical activity which again one of the uh one of the neurologists that I watched recommended this but she did point out that one of the problems with some of these transient things is that the um that the abnormal electrical activity is itself also transient if it is the case of a seizure or epilepsy and so it can be difficult to determine unless you like have the electrodes on someone while they're having an episode an MRI again this makes sense because if there's a lesion or a tumor or something the MRI will discover that and then CBC for uh and metabolic panel so uh this basically says like hey there could be some underlying medical conditions such as anemia or electrolyte imbalances um which would be interesting so again like you just need more information um but yeah so this is an end-to-end process that the only input I gave it was this chat log and then you can see it compressed it into clinical notes which can be recorded in a chart it came up with some uh with some diagnostic hypotheses it came up with a clinical recommendation panel um basically census examination and interview questions and then finally referrals labs and tests so this is an end-to-end process and I've kind of unpacked some of the limitations along the way so one of the chief limitations is obviously chat GPT does not have hands It Doesn't Have Eyes Ears Nose whatever so it doesn't have all the clinical senses that a clinical practitioner will have but it has read enough of this content on the internet in order to understand that this is generally how medical evaluations go and my goal here is twofold one I want to demonstrate that it's possible and relatively simple it's a little bit of background about me is um and back in my in my corporate days I was an infrastructure I.T infrastructure engineer with a specialization on cloud and Automation and so I the the biggest project that I ever automated was to update the firmware of several hundred servers as well as the drivers of the operating systems running on those servers and these were hypervisors so a hypervisor is a particular kind of server that runs virtual machines so this is the kind of hardware and software stack that underpins all Cloud instances and so what I had to do was we had a we had a critical patch on our storage system so we had several petabytes of data that we needed to make sure we didn't disrupt and we had hundreds of really really large servers and by large servers I mean these servers had two terabytes of ram each running uh cloud-based workloads and so what I needed to do was I needed to update the firmware after we updated the the firmware of the storage system so I needed to update the firmware of the storage cards on the servers and then update the drivers uh within the operating systems running on those servers and I needed to do it without disrupting the workload so rather than spend weeks and weeks doing this manually I automated I spent one week writing the scripts to do this uh automatically and then I set it to to go overnight it worked for about eight hours straight while I was asleep and I came back the next morning all of my servers had been patched and rebooted um and and yeah so I did this back in like 2015 so this is like old hat for me and so the automation process of five simple steps like this is like pretty basic now obviously if you've been following my work you know that I'm working on something that is fully autonomous and should be able to do this entirely on its own with the simple mission of achieve the best health outcome for the patient um as the mission but what I wanted to show is that for a more structured approach for something that could be adapted to be a clinical tool today this is something that is within the realm of possibilities another major Gap from this tool is again we don't really know how chat GPT will identify things so uh there's a rule of thumb in in the medical community which common problems are common and so you know transient ischemic attack and epilepsy these are common conditions that pretty much everyone knows about um it does it does mention a few other possibilities like syncope migraine metabolic disorders uh panic attacks uh you know that sort of thing so it does it does pick up on a few other things but what one thing that is lacking from this system is it doesn't I haven't basically uh focused on differentials or rare conditions but that would be pretty easy as an additional step um so basically you you I what I would do for that is I would just plug in the notes and say hey um like based on these like here's the common things we know about what are the rare things what are the differentials that we might be ignoring um and so that would be a relatively easy thing to add but you don't necessarily want to count on that only um which is why I ended it with referrals and follow-up tests because that's a responsible thing to do anyways um you know patients are going to be intrinsically unaware of some of the things going on inside their bodies so anyways let's um now that you understand kind of what's going on here let's let's explore the Repository so I have a gigantic medical device disclaimer here on the on the front um just because again I need to drive home the point that this is provided under the MIT license which is a highly permissive um open source license this is for experimental purposes only uh demonstration purposes only so on and so forth okay so how do you how do you use this though how do you run it basically you just run chat dot pi and it'll take it'll it'll do the rest from there once you're done you just type in done in all caps and it'll move on to the rest of the of the procedure of the workflow um so the chat dot Pi is a very very simple um you know basic chat bot and then it goes through a few steps it's really repetitive it just loads different system messages and pipes the right information and all of the information that gets piped into those system messages are are logged in the logs and so the log files are saved in sequential order so there's the chat there's the notes there's the diagnostic hypotheses there's the clinic medical examination and then finally there's the referrals this end to end the longest thing is actually the chat um and then it takes about 60 to 120 seconds for the rest of it to generate um and say like hey you know here's here's the clinical thing and here's some referrals that we might do uh the idea here is you know for uh if if I were to design a product for this today and where would I deploy it I would I would aim this at um disempowered or uh or underserved communities maybe not even necessarily in America or Europe but there are plenty of underserved communities all around the world that don't have access to high quality health care and or they might have a shortage of of clinicians and so this could this could definitely like offload uh a lot of the work and then you have the experienced clinicians that basically like take a look at it sign off and say like yes this seems reasonable or go this way instead or whatever um okay so then I've got all of these um all of the system messages saved as markdown files so you can take a look at these and you can see like it's actually relatively straightforward this is the system message that I use for the chat bot so Mission you're a patient intake chatbot focusing on symptoms your mission is to ask questions to help a patient fully articulate their symptoms in a clear manner you're trying your chat transcript will be all will ultimately be translated into chart notes so I'm just giving it just enough context so it knows what its purpose is and where in the process it is operating I had to add a second thing for rules because if you don't add like ask one question at a time it'll list like 10 questions and I'm like chat GPT seriously you're not like clinicians are not going to Rattle off like 10 questions in a row so I said ask only one question at a time provide some context or clarification or on the follow-up questions you ask and then I said do not converse with the patient and the reason I had to add add this one is because it would say I'm sorry you're feeling that way let's invest I'm like no just ask the freaking questions so um uh this that this resulted in the in the the style and tone that you see here where it says I understand your concern can you please describe it so it's just it's really down to Basics thank you for sharing can you tell me more about the fall you know just No Nonsense um just very direct very straightforward um the second part is the prepare notes um so Mission you're a charting bot that will be given a patient intake transcription um you are to translate the chat log um into thorough medical notes for the physician so again I'm telling it where in the process it is and what the context is and it knows enough I don't have to tell it exactly what to do I just say this is this is where in the process and it kind of understands I did give it an interaction schema here which says the user will give you the transcription your output will be a hyphenated list of notes make sure you capture the symptoms and any saline information in an orderly and structured manner so again I added this just so that it would be consistent I say generate notes and so in this case the notes you see it follows this format where it's just a list of hyphenated notes No Nonsense no fluff nothing extra it captures everything in as few words as possible then for the diagnostic part this one is a little bit different so Mission your medical note spot that will be given a chart or symptoms of a patient shortly after intake again give it some context you will generate a list of most likely diagnostic or Avenues of Investigation for the physician to follow up on so again I'm telling it like come up with some medical hypotheses I could have used the term hypotheses but when you when you use the word hypothesis my fear there is that chat GPT will think that like it's more of a scientific hypothesis but I said most likely diagnosis or Avenues of Investigation so interaction scheme of the user will give you medical notes you will you'll generate a report with the following format so here's a report format a description of the condition Alternatives so on and so forth yep so you have that it's real it's very straightforward also this isn't rendering correctly this is weird so let's zoom in I'm not sure why it's not rendering correctly in um in markdown but you see like potential diagnosis in all caps description of the condition we see that that format reflected here when we come here where you see transient ischemic attack differentials demographics symptoms indicators so on and so forth um yeah I don't know what was going on with GitHub it freezes up sometimes hey GitHub had a senior moment we need to diagnose GitHub um okay so that was the that was the the diagnostic part um coming back out here the clinical part the way that this works Mission you are Clinic you're a medical intake bot um you are preparing for this final step before a medical professional physician nurse or a physician's assistant evaluates the patient in a clinical setting you'll be given notes from the patient's intake as well as system generated diagnostic Avenues in order to prepare some clinical recommendations to evaluate the patient keep in mind that this is a primary care visit so I had to add the primary care visit because it was like trying to jump ahead to like MRIs and stuff and I'm like no this this is just like basic stuff like you're not gonna you're not gonna be like immediately trundled off to an MRI at least not in America um on a on a primary care visit in countries with more sophisticated Medical Systems it's I've actually heard stories where like someone went to their primary care for like a lump in their breast and like immediately was taken across the hall to a mammogram so it's like okay like in an ideal situation yes you would just immediately go right over to whatever medical device you need to but we're going to follow kind of the Amer the American Paradigm which is deliberately inefficient go figure thanks insurance companies we hate you um okay so senses so basically I say like you know you're gonna pay attention to all of your senses as part of the uh as part of the clinical test obviously this is not for chat GPT this is to recommend to the clinician um the clinical examination and interview questions I already kind of showed you all this in great detail um but here is what it looks like in the system message so I say like here's you know here's the examination technique here's the description of what to look for and why it's probative um your probative purpose of the question in all caps and then suggested question and there you have it and then finally um the referrals so the referrals part again very straightforward your clinical medical bot you'll be given medical notes charts your primary job is to recommend specialist referrals and or follow-up tests so here's the referrals part where it just says type of specialist in all caps description of the workup recommendations so on EG what are they looking for and why and then finally the types of labs and tests so type of lab work type of tests um so on and so forth and just kind of describe like this is what you're going to send out and this would be this information would be handed to the clinical staff in order to follow up for the uh for the patient but rather than have the physician do all of this it's completely automated so the physician all they have to do is sign off on it um and if they agree or disagree they can add some notes as to why but basically like this could be integrated into epic or Cerner or any other of uh you know medical software provided companies right now today because this is basically how those medical software's already work this is just adding llms as a layer to increase the power of those things so yeah I think that's about it you've seen the whole thing the whole repo is relatively straightforward um I've got the readme I've got the license I've got the demo log so you can take a look for yourself um but yeah it's just a very linear workflow of information with the goal of streamlining Medical Care um again like take all of this with a grain of salt there are some enormous limitations I would love to partner with someone whether a university or medical research or even Government research in order to explore making this more robust and exploring its efficacy and and if it actually helps clinical settings because here's the thing you can have something that works in theory but if the tool is not helpful then the clinicians won't use it or if it if it's actually harder to use and and more distracting and actually decreases medical outcomes that would be bad but I would love to see something like this being implemented sooner rather than later and I think that we could both increase medical increase the quality of patient outcomes and decrease the cost of of clinical practices so I think that's about it thanks for watching cheers have a good one