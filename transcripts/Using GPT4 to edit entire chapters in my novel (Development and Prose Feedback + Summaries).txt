hey gang David Shapiro here introducing a new repo that I'm working on so this is uh as many of you are aware I've been working with fiction and language models for quite a while um and this one is uh my chapter summarizer so what does it do I can't show you the end result because it's private it's for for my novel but you're welcome to run it yourself and you can also test it in the playground if you've got access to the chat API and gpt4 it will not work anywhere else because of the um and actually it might only work with the API I haven't actually tried it in here but the gpt4 API will give you 8 000 tokens which if you write longer chapters like I do which is four to five thousand words you need that 8 000 tokens and so the idea though is I wanted a way to get really good feedback really quickly and I tried for months and months with the 4000 token limit and if you summarizing the chapter could work but not always um and so anyways the final result is now that I've got access to the gpt4 API I just created this and suddenly everything is infinite excuse me infinitely easier kind of hiccups um but yeah so let me walk you through this um I do have instructions here um but yeah so what you'll need to do is you'll need to create your API key here and then you'll also need to create your folders here so the um the chapters dot doc so put all of your chapters in here as word docs and then uh this this Pi uh Powershell script will summer or sorry convert them to text then that'll they'll end up here and then finally you run the second one to summarize and it will um jump drop the summaries here uh so the the the the linchpin of this is this prompt here so this is this is the primary thing that you're trying to achieve please write an executive summary of the following chapter followed by a list of the most Salient details from the chapter saline details should include uh chapter development plot advancement important World building details and any thematic elements those are the four primary pillars of good fiction of well all stories um please write the list of details in complete sentences next please provide some developmental feedback what is the one biggest thing wrong with this chapter what is the first and biggest thing I need to work on as the author finally please provide prose feedback by focusing on the dialogue Exposition interiority action and I should actually change this to description um sorry you should avoid Exposition if you can um but description is good uh so I made that mistake there so anyways the first script is super simple it just passes in its Powershell because if you're using Microsoft Word you can do this part manually too if you want like if you're if you're writing your your chapter somewhere else you can copy them out to text files doesn't matter but for this draft I am doing it all as one chapter per Word document um just for cleanliness sake um and that's what this does so it'll drop it all here into chapters text and then I run the second script which is really really straightforward um all it does is in the main Loop we set the API key we get the chapters underscore text we get the summaries if it doesn't make it it'll make the directory for you which is nice um and then what it does so here's a couple things to to pay attention to um if the if the program barfs in the middle you don't want to redo everything um so it'll it'll skip it if it's already been summarized so then it'll tell you the file that it's reading it'll open the chapter it will populate the prompt right here and then it will create the conversation so as of right now gpt4 is only available at the chat completion endpoint I don't I think they're moving away from from the original completions endpoint entirely I don't know but anyways so I give it the the system role is I'm a fiction writing assistant who will always provide thorough professional and detailed help it's pretty pretty straightforward you can probably play with this if you want um especially if you wanted to take some elements of the instructions out but uh you know there's there's been some like in some of the documentation it says that it doesn't pay as much attention to the system message um as the as the user message so what I do is I have the I just have this so it knows that I am a fiction writing assistant okay great and then I I put the prompt in um and because I'm using the gpt4 endpoint with 8 000 tokens it can read the entire uh chapter so then I get the summary and then I save out the summary it is that simple it's brain dead simple now there's a couple other things that I added so um the first time I ran this it ended up failing because of um error rate or uh usage rates so gpt4 is presently super super constrained and so what I did was I added an exponential back off so that if you get an error the first time it'll wait five seconds then 10 seconds then 20 and so on and I have it uh it'll retry up to six times um waiting longer and longer between each time after I Incorporated this I didn't have any trouble um but that you know it is what it is um another thing that I had to modify was for whatever reason converting from word doc to text um still produce some UTF errors on occasion on only like a couple files so I added the ignore here so but here's the thing is gpt3 doesn't care if you've got a couple of erroneous characters the big thing is that um oh actually I didn't include it here um was the force ASCII in code decode but it haven't had any trouble since so I think that's it um yeah and here let me go back to the repo oh so a couple other things like I said I'm not sure if it'll work here because I look at the maximum length of 2048 um so I don't think that they're giving you the full 8 000 tokens here um so I don't I don't think you can actually test it in the playground but also this is expensive so I had to restart it a few times so it's actually about half this but half my novel or just over half my novel cost about somewhere between four and eight dollars to review um which in the grand scheme of things is hella cheap because it's like four dollars who cares um but then you compare that to like you know some of the other tasks that you guys have seen me do it cost me 43 cents right so because of the volume of the text that it's reading it is a lot more expensive um still it's way cheaper than a full editor now that being said I added some some notes here at the end because I paid a high-end Editor to help me with my story and that experience was still worthwhile even though it was like Seventeen hundred dollars I paid a human to read it and to understand what I was what I was trying to achieve now that being said once Jeep once we get the 32 000 token um endpoint which I I haven't tested that yet or you know as fast as it's ramping up because 32 000 is eight times more than the four thousand token so who knows by the end of the summer we might be at 300 000 tokens which is more than enough to read an entire novel right so I don't know what's going to happen to the professional editing industry nor the fiction industry I think we're going to end up with a lot of books out there um but anyways it is what it is so um yeah it provides some developmental feedback as well as Pros feedback so when I was using chat gbt to work on the um Cornelia valyria storied my Ascension novel after I got the first chapter written um which I deleted that video because it was a hot mess but the thing that I realized was that asking chat GPT what is the biggest problem with this chapter is actually the best way to to get it to give you developmental feedback because there's usually going to be only one big problem um but also you can only focus on one problem at a time right so like you know say for instance your chapter is otherwise fine maybe it has some issues but it just doesn't have enough tension you need to fix that problem first and then see what comes next you actually can't solve more than one problem at a time and therefore it's an iterative process um and then finally I also have it give you some prose feedback just to make sure that at the at the line level that you're doing a good job because those are kind of two different Scopes so it'll give you a summary uh an executive summary a list of salient details developmental feedback and um and prose feedback all in one go it works pretty well um yeah so I think that's about it uh the it's up here on MIT license um yeah I guess I'll stop it there let me know what you guys think