okay so you know how chat GPT has been slightly let's say lobotomized lately it seems to not really handle coding that well and uh if you're like me I tried GitHub co-pilot and I really don't like it uh I applied for the GitHub co-pilot chat and then like a few days later I tried to go use it and it says oh well the beta has expired or you know you've been kicked out or whatever I was like okay whatever so um I realized that like all right I have the power to fix this myself because I've been shying away from doing my coding experiments because chat GPT is broken or lobotomized or whatever and GitHub co-pilot and you know I know there's lots of other tools there's Amazon and blah blah but you know like I can fix this I can I can do the thing that I want to do and I can make a thing that is specific so I came over to the playground and I was like all right let's try this so I um I just want to show you real quick uh you know I gave a really simple prompt system message you or python coding assistant the user will give you instructions to help write functions uh you may ask for clarification if needed but otherwise you should only output python code and of course you can change this to whatever language you want adhere to pep 8 so that's the python enhancement program uh version 8 which is basically sets all the standards for how to write python pythonically provide explanations of the code only if the user asks for them um so you know how like chat GPT will be super overly verbose um and then I I gave it a copy of the script that I was working on um and so then I said write a function that loads all files into a given folder returns a list of uh list of lists and groups of five include the full file path and it just bam did it I was like cool that's exactly what I wanted and I was like wait that worked really well so why don't I just make a chat bot that does it so coding chatbot assistant since chat GPT has been lobotomized and GitHub co-pilot is broken um I got it set up here here's an example of the output so for instance I was um I'm working on uh you know my recent projects have been chat Bots with long-term memories and uh KB articles and stuff so I was like okay I've got this far just write the function for me so I told it how I want to write the function you know it's a KB article with a yaml file so on and so forth now that being said I want to show you a really cool cool bit so this is the output you can see it's pretty familiar so it gives you like okay uh you know you need to import this let's do this here's a couple functions and it thought through it and gave it a very very very specific output um I haven't tested this code yet but like this is very much the behavior that I want to see so now let me explain to you how the chat bot works so we'll go through the code uh real quick it's pretty straightforward it's 105 lines of code so like not not the most complicated thing and actually some of this is Superfluous I actually think that I don't use the yaml functions anywhere yeah so I could probably delete that and make it even shorter all right so ignore those helper functions here's the uh here's the called a GPT super simple you just call it you get the text response and then what I started doing is I just passed back the token count so that I can manage the conversation internally but pretty much this whole thing here is just if there's an error it will give you some output so for instance if the content context length is too long it'll trim the conversation and try again it'll let you know what happened if another error happened it'll put it'll output that the whole thing sometimes the you know it's not available or whatever open AI has gotten a lot better but sometimes you'll have uh you know network errors and other stuff and what this does is it uses exponential back off so every time it retries it doubles the amount of time that it'll wait um to try again and it'll it'll give you debug output the whole time uh and then I've got this function so this is a multi-line input function uh which it will switch into this mode if you want to update a scratch Pad so in this case uh the scratch pad is just a plain text file that it uses to load into the system message so I've got that system message that I showed you and then a description of the below code scratch Pad may be provided by the user blah blah and so then it I wrap it in the comment so that way knows like hey this is Python and then it'll copy paste the you know your code into it from the scratch pad and so what you can do is first it'll take you know input from the user and then if you type in scratch pad it will give you a chance to update the scratch Pad which is you can put anything in you can put in code you can put in comments these whatever you can put in a file system description whatever you want uh but the point is is that it will use this function so that it will continue to accept uh new lines of input without um without breaking uh and so then when if you type end at the very end then it says okay cool save exit um I strip that out of of the uh end um and so on and so forth so there you go uh let's see it should be about it um oh and then if you accidentally hit um enter twice because you know that can happen um it'll just go like it says you know enter um whoops ah crap I accidentally typed something so that's going to break it um yeah it was very confused um yep okay um let's see so then the other thing that I do is I accumulate all the messages the uh the user input and the chat bot response in a list called all messages and I keep that separate from the conversation object that I passed to chat GPT did I pass to the API and the reason is because I actually just had a um had a a a patreon uh supporter give me this really powerful tip which is that if you put the system message at the end rather than at the beginning it is much more likely to continue to adhere to the instructions that you gave it rather than drift um so apparently this I haven't I haven't spent too much time testing it but you know how sometimes like chat gpt's Behavior will change over time especially as the conversation gets longer it'll continue to kind of modify Its Behavior and it'll usually kind of default back to its default Behavior if you put the system message at the very end so what I do is I I say you know conversation is an empty list I add all messages and then I append the system message at the very end and then I get the response and so then once I get the response it passes back the tokens if it's uh if the token count is over 7 500 because we've got a limit of 8 000. I just remember the I remember I removed the oldest message um so pop zero um and then I append the assistant response to all messages so remember all messages is kept separate um so that I can just tack on the com the system message separately and then I get the output and here it goes um so what I what I realized is that if you use text wrap it will it'll nullify all of the new lines so what I do is I split the new lines and then text wrap it so that if there's comments then it won't be too long so anyways there you have it the repo is up here it's working um the only thing that it's pretty well documented I got in the habit of just using chat GPT to produce the documentation um because that makes it easier for everybody um setup is super simple you just need to open AI you need your openai API key and then the biggest thing that you need to know is to use a scratch pad I do have instructions in the console output so it'll tell you how to get into the scratch pad and then how to get out of it and then the the console will tell you what what mode you're in um you can tell I was an infrastructure engineer who used Cisco switches um because I'm just like hey this this model Works uh anyways so yeah I think that's about it so this is this is my new um chat bot coding assistant and uh yeah I hope that you find it useful super simple super straightforward um yeah uh let me know if you have any thoughts about how to improve it but I think honestly the scratch Pad is like all you need uh because then you can you can update this out of band as well uh if you want to you know um whatever you want to put in it right you can you can even put multiple scripts in it or multiple files or whatever um but yeah so thanks for watching I hope you liked it and I'm gonna get back to coding bye